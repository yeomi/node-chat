<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Real Time Chat</title>
</head>
<body>
	<h1>Real time Chat</h1>

	<p><input type="text" id="say" placeholder="Type your message"><input type="button" value="Send" id="send"></p>

	<div class="container">
		

	</div>

	<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>

			$("#say").focus();

			var socket = io.connect("http://localhost:8080");
			var pseudo = prompt("What is your username ?");
			socket.emit("newUser", pseudo);
			document.title = pseudo + ' - ' + document.title;
			$(".container").prepend("<p><em>Welcome " + pseudo + "</em></p>");


			socket.on("message", function(message) {
				$(".container").prepend("<p><em>" + message + "</em></p>");
			});

			socket.on("postMessage", function(pseudo, message) {
				console.log(message);
				$(".container").prepend("<p>" + pseudo + " : " + message + "</p>");
				
			});

			var message;
			$("#send").click(function() {
				message = $("#say").val();
				socket.emit("newMessage", message);
				$(".container").prepend("<p>Me : " + message + "</p>");
				$("#say").val("").focus();
				return false;
			});

			$(document).keypress(function(e) {
			    if(e.which == 13) {
			        $("#send").click();
			    }
			});

	</script>
</body>
</html>